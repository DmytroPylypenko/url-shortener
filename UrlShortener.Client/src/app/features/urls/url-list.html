<div class="container mt-4">
  <h2 class="mb-3">Shortened URLs</h2>

  @if(errorMessage) {
  <div class="alert alert-danger">
    {{ errorMessage }}
  </div>
  }

  <!-- Add new URL (only for authenticated users â€” protected by backend) -->
  @if(isAuthenticated){
  <div class="card mb-4 p-3">
    <h5>Add a new URL</h5>
    <div class="input-group">
      <input [(ngModel)]="newUrl" class="form-control" placeholder="Enter URL to shorten" />
      <button class="btn btn-primary" (click)="createUrl()">Shorten</button>
    </div>
  </div>
  }

  <!-- URL Table -->
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Original URL</th>
        <th>Short Code</th>
        @if(isAuthenticated){
        <th></th>
        }
      </tr>
    </thead>

    <tbody>
      @for(url of urls; track url.id) {
      <tr>
        <td class="url-cell" [title]="url.originalUrl">
          {{ url.originalUrl }}
        </td>

        <td class="shortcode-cell">
          <a [href]="'/r/' + url.shortCode" target="_blank">
            {{ url.shortCode }}
          </a>
        </td>

        @if(isAuthenticated) {
        <td>
          <a [href]="'/urls/info/' + url.id" class="btn btn-info btn-sm me-2">Info</a>

          <button class="btn btn-danger btn-sm delete-btn" (click)="deleteUrl(url.id)">
            Delete
          </button>
        </td>
        }
      </tr>
      }
    </tbody>
  </table>
</div>
